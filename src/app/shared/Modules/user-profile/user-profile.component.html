<div class="profile-page">
  <div class="profile-header">
    <div class="avatar-block">
      <div class="avatar-circle">{{ avatarText }}</div>
      <div class="name-role">
        <div class="full-name">{{ user.firstName }} {{ user.lastName }}</div>
        <div class="role">{{ user.role }}</div>
      </div>
    </div>

    <button class="btn ghost" (click)="toggleEdit()">
      {{ editMode ? "Close" : "Edit Profile" }}
    </button>
  </div>

  <div class="profile-grid">

    <!-- Left Cards -->
    <div class="left">
      <div class="card small">
        <div class="card-title">Contact</div>
        <div class="card-body">
          <div class="kv">
            <div class="k">Email</div>
            <div class="v">{{ user.email }}</div>
          </div>
          <div class="kv">
            <div class="k">Role</div>
            <div class="v">{{ role }}</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right content -->
    <div class="right">
      <div class="card">
        <div class="card-title">Profile Details</div>

        <!-- Display Mode -->
        <div *ngIf="!editMode" class="card-body">
          <div class="row"><div class="label">First Name</div><div class="value">{{ user.firstname }}</div></div>
          <div class="row"><div class="label">Last Name</div><div class="value">{{ user.lastname }}</div></div>
          <div class="row"><div class="label">Role</div><div class="value">{{ role }}</div></div>
          <div class="row"><div class="label">Email</div><div class="value">{{ user.email }}</div></div>
        </div>

        <!-- Edit Mode -->
        <form *ngIf="editMode" class="card-body form" (ngSubmit)="saveProfile()">
          <div class="form-row">
            <label>First Name</label>
            <input [(ngModel)]="tempUser.firstName" name="firstName" required />
          </div>

          <div class="form-row">
            <label>Last Name</label>
            <input [(ngModel)]="tempUser.lastName" name="lastName" required />
          </div>

          <div class="form-row">
            <label>Role</label>
            <input [(ngModel)]="tempUser.role" name="role" required />
          </div>

          <div class="form-row">
            <label>Email</label>
            <input [(ngModel)]="tempUser.email" name="email" required email />
          </div>

          <div class="form-actions">
            <button type="button" class="btn outline" (click)="cancelEdit()">Cancel</button>
            <button type="submit" class="btn primary">Save</button>
          </div>
        </form>

      </div>
    </div>
  </div>
</div>
